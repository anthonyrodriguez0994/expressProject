extends index


block scripts
    link(href="https://vjs.zencdn.net/7.4.1/video-js.css" rel="stylesheet")
    script(src="https://vjs.zencdn.net/ie8/ie8-version/videojs-ie8.min.js")
    script(src='https://vjs.zencdn.net/7.4.1/video.js')

block append stylesheet
    link(rel='stylesheet', href='/stylesheets/productions.css')
    //link(rel='stylesheet', href='/stylesheets/player.css')

block content
    .container-fluid.backgroundproduction
        .container-fluid#productionbox
            .row
                .col-sm-2
                .col-sm-4#showimage
                    img.img-fluid.rounded.mx-auto.logoimage#logos(src=`/images/showthumbnail/${productionData.id}.jpg` alt=`${productionData.title}`, width='300')
                .col-sm-4#showinfo
                    h1.text-white= productionData.title
                    p= productionData.showSummary
                    .container
                        //disabled until multi-genre behaviour is determined - perhaps define a "primary" genre for each production?  Let me know.
                        //a(class='button' href=`/home?genre=${productionData.genre}` )(class="btn"+productionData.genre).btn #{productionData.genre}

                .col-sm-2
                    

    .container.showgrid
        .container.cardcontainer#seasonsandeps
            .row
                //.col-sm-1
                .col-sm-4
                    .dropdown.select.selectpicker.season-select(data-dropup-auto='false')
                        button.btn.btn-primary.btn-dark.dropdown-toggle#buttonstyle(type='button', data-toggle='dropdown')
                            Dropdown Season #{selectedSeason}
                        .dropdown-menu.bg-dark.dropdown-dark
                            - var season = 1;
                            while season <= productionData.seasonCount
                                a.text-center#link(href= `./?production=${productionData.id}&seasonSelection=${season}`) Season #{season}
                                - season++
                                p
                .col-sm-8
            .row
                .container
                    - var episode = 1
                    while episode <= episodeCount
                        if (episode % 3 === 1)
                            .row
                        .col-sm-4
                            .card.epbox
                                - var episodeLink = `./?production=${productionData.id}&seasonSelection=${selectedSeason}&episodeSelection=${episode}`
                                a#link(href= '#' data-toggle='modal' data-target='#myModal')
                                    img.card-img-top#logos(src=`/images/epthumbnail/${productionData.id}.jpg` alt=`${productionData.title}`, width='300')
                                //a#link(href= episodeLink data-toggle='modal' data-target='#myModal')
                                    img.card-img-top#logos(src=`/images/epthumbnail/${productionData.id}.jpg` alt=`${productionData.title}`, width='300')
                                .card-body
                                    style(type='text/css').

                                        @media screen and (min-width: 768px) {
                                            .modal-dialog {
                                                width: 700px; /* New width for default modal */
                                            }

                                            .modal-sm {
                                                width: 350px; /* New width for small modal */
                                            }
                                        }

                                        @media screen and (min-width: 992px) {
                                            .modal-lg {
                                                width: 950px; /* New width for large modal */
                                            }
                                        }

                                    // Trigger the modal with a button
                                    button.btn.btn-info.btn-lg(type='button' data-toggle='modal' data-target='#myModal') Episode #{episode} - #{episodeData[episode - 1].title}
                                    // Modal
                                    #myModal.modal.fade(role='dialog')
                                        .modal-dialog.modal-lg
                                            // Modal content
                                            .modal-content
                                                .modal-header
                                                    button.close(type='button' data-dismiss='modal') &times;
                                                    h4.modal-title Modal Header
                                                .modal-body
                                                    video(id='my-video' class='video-js' controls preload='none' width='1920' height='1080' poster='/images/showthumbnail/testProduction.jpg' data-setup='{"fluid":true}')
                                                        source(src = '/video/chungus.mp4' type = 'video/mp4')
                                                        p.vjs-no-js Please enable Javascript to see this video
                                                //.modal-footer
                                                    button.btn.btn-default(type='button' data-dismiss='modal') Close
                                    //script('type/javascript').
                                        $(".modal-wide").on("show.bs.modal", function () {
                                            var height = $(window).height() - 200;
                                            $(this).find(".modal-body").css("max-height", height);
                                        });
                                    //a.demolink(href='#' data-toggle='modal' data-target='#myModal') Episode #{episode} - #{episodeData[episode - 1].title}
                                        #myModal.modal(tabindex='-1' role='dialog' aria-labelledby='bannerformmodal' aria-hidden='true')
                                            .modal-dialog
                                                .modal-content
                                                    .modal-header
                                                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                                                            span(aria-hidden='true') Ã—
                                                        h4#myModalLabel.modal-title episode_name
                                                    .modal-body
                                                        | Season #{selectedSeason} Episode #{episode}
                                                        div
                                                            video(id='my-video' class='video-js' controls preload='none' width='1280' height='720'
                                                                poster='/images/showthumbnail/testProduction.jpg' data-setup='{"fluid":true}')
                                                                //source(src='video/chungus.mp4' type = video / mp4)
                                                                p.vjs-no-js Please enable Javascript to see this video
                                                            //script(type='text/javascript').
                                                                videojs("my-video").src([
                                                                    {type: "video/mp4", src: "/video/chungus.mp4"},
                                                                ]);
                        - episode++